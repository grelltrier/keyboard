# Maintainer: Robin Grell (pentamassiv) <pentamassiv@posteo.de>

pkgname=fingerboard
pkgver=0.1.0
pkgrel=1
pkgdesc="A customizable open-source keyboard with advanced features"
url="https://github.com/grelltrier/keyboard"
arch=(any)
license=(GPL3)
depends=(gtk-layer-shell phoc)
optdepends=('feedbackd: haptic feedback')
makedepends=(cargo git)
conflicts=(squeekboard squeekboard-git)
source=("git+https://github.com/grelltrier/keyboard.git")
sha256sums=("SKIP")

# pkgver() {
#   cd $pkgname
#   git describe --tags | sed 's/^v//;s/-/+/g'
# }

prepare() {
  cd $pkgname
  cargo fetch --locked
}

build() {
  cd $pkgname
  cargo build --release --frozen --all-targets
}

package() {
  cd $pkgname
  install -Dm 755 target/release/${pkgname} -t "${pkgdir}/usr/bin"
  install -Dt "$pkgdir/usr/share/doc/$pkgname" -m644 README.md
}