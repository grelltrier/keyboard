<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1068px" preserveAspectRatio="none" style="width:2097px;height:1068px;" version="1.1" viewBox="0 0 2097 1068" width="2097px" zoomAndPan="magnify"><defs><filter height="300%" id="f1rgeo1avhmkd1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[f57290ba224303f1ad01e034b26ebd12]
cluster user_interface--><polygon fill="#FFFFFF" filter="url(#f1rgeo1avhmkd1)" points="16,6.294,120,6.294,127,29.0939,1934,29.0939,1934,1061.794,16,1061.794,16,6.294" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="16" x2="127" y1="29.0939" y2="29.0939"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="98" x="20" y="21.2999">user_interface</text><!--MD5=[85854914a254229271247f711f245f5e]
cluster dbus--><polygon fill="#FFFFFF" filter="url(#f1rgeo1avhmkd1)" points="1958,766.294,1999,766.294,2006,789.0939,2080,789.0939,2080,878.294,1958,878.294,1958,766.294" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1958" x2="2006" y1="789.0939" y2="789.0939"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="1962" y="781.2999">dbus</text><!--MD5=[3e09a69be21538652ac4edbcb9c29289]
cluster submitter--><polygon fill="#FFFFFF" filter="url(#f1rgeo1avhmkd1)" points="1958,261.794,2029,261.794,2036,284.5939,2068,284.5939,2068,373.794,1958,373.794,1958,261.794" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1958" x2="2036" y1="284.5939" y2="284.5939"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="65" x="1962" y="276.7999">submitter</text><!--MD5=[d8f9eb381476c1ab6e7b4673404ff11c]
cluster keyboard--><polygon fill="#FFFFFF" filter="url(#f1rgeo1avhmkd1)" points="1958,537.294,2028,537.294,2035,560.0939,2064,560.0939,2064,649.294,1958,649.294,1958,537.294" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1958" x2="2035" y1="560.0939" y2="560.0939"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="1962" y="552.2999">keyboard</text><!--MD5=[7e20e022571e30ec1001cf6eabd7f3e2]
class Model--><rect codeLine="6" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="42" id="Model" style="stroke: #1A66C2; stroke-width: 1.5;" width="67" x="382.5" y="591.294"/><ellipse cx="394.5" cy="604.294" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M398,602.9971 C397.9531,602.294 397.7969,601.8565 397.4688,601.4034 C396.8438,600.5909 395.8594,600.1377 394.6563,600.1377 C392.3906,600.1377 390.9844,601.7627 390.9844,604.3565 C390.9844,606.9346 392.375,608.544 394.6094,608.544 C396.6094,608.544 397.9375,607.3877 398.0313,605.5596 L396.4219,605.5596 C396.3125,606.5752 395.6875,607.1534 394.6563,607.1534 C393.375,607.1534 392.6406,606.1221 392.6406,604.3721 C392.6406,602.6065 393.4219,601.544 394.7188,601.544 C395.6719,601.544 396.2031,602.0127 396.4219,602.9971 L398,602.9971 Z "/><ellipse cx="410.5" cy="603.294" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="417.5" y="607.913">Model</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="383.5" x2="448.5" y1="617.294" y2="617.294"/><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="383.5" x2="448.5" y1="625.294" y2="625.294"/><!--MD5=[6b79b5687bd0e7dbe0fc0d1c3dfd2a98]
class Msg--><rect codeLine="8" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="213.5987" id="Msg" style="stroke: #1A66C2; stroke-width: 1.5;" width="316" x="32" y="505.294"/><ellipse cx="170" cy="518.294" fill="#EB937F" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M168.5156,518.8409 L172.3594,518.8409 L172.3594,517.4659 L168.5156,517.4659 L168.5156,515.6534 L172.6719,515.6534 L172.6719,514.2784 L166.875,514.2784 L166.875,522.294 L172.8594,522.294 L172.8594,520.919 L168.5156,520.919 L168.5156,518.8409 Z "/><ellipse cx="191" cy="517.294" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="21" x="198" y="521.913">Msg</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="33" x2="347" y1="531.294" y2="531.294"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="38" y="545.5129">GestureSignal(f64, f64, GestureSignal)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="246" x="38" y="558.7128">ButtonInteraction(String, String, String, TapMotion),</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="38" y="571.9127">OpenPopup(String)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="38" y="585.1126">SubmitText(String)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="304" x="38" y="598.3125">Suggestions((Option&lt;String&gt;, Option&lt;String&gt;, Option&lt;String&gt;))</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="38" y="611.5124">SetVisibility(bool)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="210" x="38" y="624.7123">HintPurpose(ContentHint, ContentPurpose)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="263" x="38" y="637.9122">ChangeUILayoutView(Option&lt;String&gt;, Option&lt;String&gt;)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="163" x="38" y="651.1121">ChangeUIOrientation(Orientation)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="178" x="38" y="664.312">ChangeKBLayoutView(String, String)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="38" y="677.5119">PollEvents</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="90" x="38" y="690.7118">UpdateDrawBuffer</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="38" y="703.9117">Quit</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="33" x2="347" y1="710.8927" y2="710.8927"/><!--MD5=[1d4e6756eb5f7ba49ae43d908b54fdb1]
class Gestures--><rect codeLine="24" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="68.3998" id="Gestures" style="stroke: #1A66C2; stroke-width: 1.5;" width="229" x="594.5" y="578.294"/><ellipse cx="682.5" cy="591.294" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M686,589.9971 C685.9531,589.294 685.7969,588.8565 685.4688,588.4034 C684.8438,587.5909 683.8594,587.1377 682.6563,587.1377 C680.3906,587.1377 678.9844,588.7627 678.9844,591.3565 C678.9844,593.9346 680.375,595.544 682.6094,595.544 C684.6094,595.544 685.9375,594.3877 686.0313,592.5596 L684.4219,592.5596 C684.3125,593.5752 683.6875,594.1534 682.6563,594.1534 C681.375,594.1534 680.6406,593.1221 680.6406,591.3721 C680.6406,589.6065 681.4219,588.544 682.7188,588.544 C683.6719,588.544 684.2031,589.0127 684.4219,589.9971 L686,589.9971 Z "/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="698.5" y="594.913">Gestures</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="595.5" x2="822.5" y1="604.294" y2="604.294"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="217" x="600.5" y="618.5129">long_press_gesture: gtk::GestureLongPress</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="600.5" y="631.7128">drag_gesture: gtk::GestureDrag</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="595.5" x2="822.5" y1="638.6938" y2="638.6938"/><!--MD5=[9c25b1a7a4b422e21a10b51bb7cdb692]
class Suggestions--><rect codeLine="29" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="81.5997" id="Suggestions" style="stroke: #1A66C2; stroke-width: 1.5;" width="101" x="1027.5" y="800.294"/><ellipse cx="1046.25" cy="813.294" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M1049.75,811.9971 C1049.7031,811.294 1049.5469,810.8565 1049.2188,810.4034 C1048.5938,809.5909 1047.6094,809.1377 1046.4063,809.1377 C1044.1406,809.1377 1042.7344,810.7627 1042.7344,813.3565 C1042.7344,815.9346 1044.125,817.544 1046.3594,817.544 C1048.3594,817.544 1049.6875,816.3877 1049.7813,814.5596 L1048.1719,814.5596 C1048.0625,815.5752 1047.4375,816.1534 1046.4063,816.1534 C1045.125,816.1534 1044.3906,815.1221 1044.3906,813.3721 C1044.3906,811.6065 1045.1719,810.544 1046.4688,810.544 C1047.4219,810.544 1047.9531,811.0127 1048.1719,811.9971 L1049.75,811.9971 Z "/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="60" x="1058.75" y="816.913">Suggestions</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1028.5" x2="1127.5" y1="826.294" y2="826.294"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="72" x="1033.5" y="840.5129">left: gtk::Button</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="1033.5" y="853.7128">center: gtk::Button</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="1033.5" y="866.9127">right: gtk::Button</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1028.5" x2="1127.5" y1="873.8937" y2="873.8937"/><!--MD5=[b0d551779ae5a4c43f98061a760028b1]
class Widgets--><rect codeLine="35" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="121.1994" id="Widgets" style="stroke: #1A66C2; stroke-width: 1.5;" width="438" x="859" y="551.794"/><ellipse cx="1055" cy="564.794" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M1058.5,563.4971 C1058.4531,562.794 1058.2969,562.3565 1057.9688,561.9034 C1057.3438,561.0909 1056.3594,560.6377 1055.1563,560.6377 C1052.8906,560.6377 1051.4844,562.2627 1051.4844,564.8565 C1051.4844,567.4346 1052.875,569.044 1055.1094,569.044 C1057.1094,569.044 1058.4375,567.8877 1058.5313,566.0596 L1056.9219,566.0596 C1056.8125,567.0752 1056.1875,567.6534 1055.1563,567.6534 C1053.875,567.6534 1053.1406,566.6221 1053.1406,564.8721 C1053.1406,563.1065 1053.9219,562.044 1055.2188,562.044 C1056.1719,562.044 1056.7031,562.5127 1056.9219,563.4971 L1058.5,563.4971 Z "/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="1071" y="568.413">Widgets</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="860" x2="1296" y1="577.794" y2="577.794"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="101" x="865" y="592.0129">window: gtk::Window</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="865" y="605.2128">_overlay: gtk::Overlay</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="265" x="865" y="618.4127">_draw_handler: relm::DrawHandler&lt;gtk::DrawingArea&gt;</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="865" y="631.6126">suggestions: Suggestions</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="865" y="644.8125">stack: gtk::Stack</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="426" x="865" y="658.0124">key_refs: HashMap&lt;(String, String, String), (gtk::ToggleButton, Option&lt;gtk::Popover&gt;)&gt;,</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="860" x2="1296" y1="664.9934" y2="664.9934"/><!--MD5=[5655c84227694af7943d3c60ac6af392]
class Win--><rect codeLine="44" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="187.1989" id="Win" style="stroke: #1A66C2; stroke-width: 1.5;" width="606" x="532" y="243.294"/><ellipse cx="816.5" cy="256.294" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M820,254.9971 C819.9531,254.294 819.7969,253.8565 819.4688,253.4034 C818.8438,252.5909 817.8594,252.1377 816.6563,252.1377 C814.3906,252.1377 812.9844,253.7627 812.9844,256.3565 C812.9844,258.9346 814.375,260.544 816.6094,260.544 C818.6094,260.544 819.9375,259.3877 820.0313,257.5596 L818.4219,257.5596 C818.3125,258.5752 817.6875,259.1534 816.6563,259.1534 C815.375,259.1534 814.6406,258.1221 814.6406,256.3721 C814.6406,254.6065 815.4219,253.544 816.7188,253.544 C817.6719,253.544 818.2031,254.0127 818.4219,254.9971 L820,254.9971 Z "/><ellipse cx="837.5" cy="255.294" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="844.5" y="259.913">Win</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="533" x2="1137" y1="269.294" y2="269.294"/><ellipse cx="543" cy="280.294" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="79" x="549" y="283.5129">relm: relm::Relm</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="123" x="549" y="296.7128">_channel: Channel&lt;Msg&gt;</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="533" x2="1137" y1="303.6938" y2="303.6938"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="212" x="538" y="317.9127">get_rel_coordinates(x: f64, y: f64): (i32, i32)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="538" y="331.1126">erase_path()</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="538" y="344.3125">draw_path()</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="418" x="538" y="357.5124">update_suggestions(left: Option&lt;String&gt;, center: Option&lt;String&gt;, right: Option&lt;String&gt;)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="541" y="370.7123"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="52" x="538" y="383.9122">load_css()</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="594" x="538" y="397.1121">make_suggestions_and_pref_buttons(relm: &amp;relm::Relm&lt;super::Win&gt;, keyboard: &amp;keyboard::Keyboard): Vec&lt;gtk::Button&gt;</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="341" x="538" y="410.312">make_pref_button(relm: &amp;relm::Relm&lt;super::Win&gt;, layout_names: Vec</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="62" x="879" y="410.312">): gtk::Button</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="375" x="538" y="423.5119">make_suggestion_buttons(relm: &amp;relm::Relm&lt;super::Win&gt;): Vec&lt;gtk::Button&gt;</text><!--MD5=[fd2653a7081ec45a927e5a46ae91a539]
class GridBuilder--><rect codeLine="59" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="107.9995" id="GridBuilder" style="stroke: #1A66C2; stroke-width: 1.5;" width="893" x="769.5" y="60.294"/><ellipse cx="1179.5" cy="73.294" fill="#A9DCDF" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M1181.0156,74.9346 L1181.5313,76.544 L1183.2344,76.544 L1180.4688,68.5284 L1178.6406,68.5284 L1175.7813,76.544 L1177.4688,76.544 L1178.0156,74.9346 L1181.0156,74.9346 Z M1180.5625,73.5596 L1178.4688,73.5596 L1179.5156,70.419 L1180.5625,73.5596 Z "/><ellipse cx="1200.5" cy="72.294" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="Verdana" font-size="11" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="54" x="1207.5" y="77.9689">GridBuilder</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="770.5" x2="1661.5" y1="86.294" y2="86.294"/><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="770.5" x2="1661.5" y1="94.294" y2="94.294"/><ellipse cx="780.5" cy="105.294" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="772" x="786.5" y="108.5129">make_stack(relm: &amp;relm::Relm&lt;Win&gt;, layout_meta_hashmap: HashMap&lt;String, LayoutMeta&gt;): (Stack, HashMap&lt;ButtonId, (ToggleButton, Option&lt;Popover&gt;)&gt;)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="870" x="786.5" y="121.7128">make_grid(relm: &amp;relm::Relm&lt;Win&gt;, view_arrangement: &amp;KeyArrangement, view_keys: &amp;HashMap&lt;String, KeyMeta&gt;): (Grid, HashMap&lt;String, (ToggleButton, Option&lt;Popover&gt;)&gt;)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="309" x="786.5" y="134.9127">make_button(key_id: &amp;str, key_meta: &amp;KeyMeta): ToggleButton</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="504" x="786.5" y="148.1126">attach_popover(relm: &amp;relm::Relm&lt;Win&gt;,button: ToggleButton, key_meta: &amp;KeyMeta): Option&lt;Popover&gt;</text><ellipse cx="780.5" cy="158.0936" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="301" x="786.5" y="161.3125">make_grid_name(layout_name: &amp;str, view_name: &amp;str): String</text><!--MD5=[d602b77267d5088762cb6a59b8ed96b1]
class UIManager--><rect codeLine="67" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="200.3988" id="UIManager" style="stroke: #1A66C2; stroke-width: 1.5;" width="586" x="1332" y="512.294"/><ellipse cx="1588.5" cy="525.294" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M1592,523.9971 C1591.9531,523.294 1591.7969,522.8565 1591.4688,522.4034 C1590.8438,521.5909 1589.8594,521.1377 1588.6563,521.1377 C1586.3906,521.1377 1584.9844,522.7627 1584.9844,525.3565 C1584.9844,527.9346 1586.375,529.544 1588.6094,529.544 C1590.6094,529.544 1591.9375,528.3877 1592.0313,526.5596 L1590.4219,526.5596 C1590.3125,527.5752 1589.6875,528.1534 1588.6563,528.1534 C1587.375,528.1534 1586.6406,527.1221 1586.6406,525.3721 C1586.6406,523.6065 1587.4219,522.544 1588.7188,522.544 C1589.6719,522.544 1590.2031,523.0127 1590.4219,523.9971 L1592,523.9971 Z "/><ellipse cx="1609.5" cy="524.294" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="1616.5" y="528.913">UIManager</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1333" x2="1917" y1="538.294" y2="538.294"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="108" x="1349" y="552.5129">sender: Sender&lt;Msg&gt;</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="1349" y="565.7128">window: Window</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="1349" y="578.9127">stack: Stack</text><ellipse cx="1343" cy="588.8937" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="174" x="1349" y="592.1126">current_layout_view: (String, String)</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="1349" y="605.3125">prev_layout: String</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1333" x2="1917" y1="612.2935" y2="612.2935"/><ellipse cx="1343" cy="623.2935" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="563" x="1349" y="626.5124">new(sender: Sender&lt;super::Msg&gt;, window: Window, stack: Stack, current_layout_view: (String, String)): UIManager</text><ellipse cx="1343" cy="636.4934" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="1349" y="639.7123">haptic_feedback(is_press: bool)</text><ellipse cx="1343" cy="649.6933" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="176" x="1349" y="652.9122">change_visibility(new_visibility: bool)</text><ellipse cx="1343" cy="662.8932" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="408" x="1349" y="666.1121">change_hint_purpose(content_hint: ContentHint, content_purpose: ContentPurpose)</text><ellipse cx="1343" cy="676.0931" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="209" x="1349" y="679.312">change_orientation(orientation: Orientation)</text><ellipse cx="1343" cy="689.293" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="478" x="1349" y="692.5119">change_layout_view(new_layout: &amp;Option&lt;String&gt;, new_view: Option&lt;String&gt;): Result&lt;(), UIError&gt;</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="505" x="1349" y="705.7118">make_new_layout_view_name(new_layout: &amp;Option&lt;String&gt;, new_view: Option&lt;String&gt;): (String, String)</text><!--MD5=[972bde5337b4335dd91fa5354c932445]
class Point--><rect codeLine="83" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="81.5997" id="Point" style="stroke: #1A66C2; stroke-width: 1.5;" width="82" x="221" y="963.794"/><ellipse cx="242" cy="976.794" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M245.5,975.4971 C245.4531,974.794 245.2969,974.3565 244.9688,973.9034 C244.3438,973.0909 243.3594,972.6377 242.1563,972.6377 C239.8906,972.6377 238.4844,974.2627 238.4844,976.8565 C238.4844,979.4346 239.875,981.044 242.1094,981.044 C244.1094,981.044 245.4375,979.8877 245.5313,978.0596 L243.9219,978.0596 C243.8125,979.0752 243.1875,979.6534 242.1563,979.6534 C240.875,979.6534 240.1406,978.6221 240.1406,976.8721 C240.1406,975.1065 240.9219,974.044 242.2188,974.044 C243.1719,974.044 243.7031,974.5127 243.9219,975.4971 L245.5,975.4971 Z "/><ellipse cx="260" cy="975.794" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="24" x="267" y="980.413">Point</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="222" x2="302" y1="989.794" y2="989.794"/><ellipse cx="232" cy="1000.794" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="238" y="1004.0129">x: f64</text><ellipse cx="232" cy="1013.9939" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="238" y="1017.2128">y: f64</text><ellipse cx="232" cy="1027.1938" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="238" y="1030.4127">time: Instant</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="222" x2="302" y1="1037.3937" y2="1037.3937"/><!--MD5=[48cb74c8515dfbc5eaeddec77cb5d7ba]
class GestureSignal--><rect codeLine="89" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="94.7996" id="GestureSignal" style="stroke: #1A66C2; stroke-width: 1.5;" width="107" x="630.5" y="793.794"/><ellipse cx="642.5" cy="806.794" fill="#EB937F" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M641.0156,807.3409 L644.8594,807.3409 L644.8594,805.9659 L641.0156,805.9659 L641.0156,804.1534 L645.1719,804.1534 L645.1719,802.7784 L639.375,802.7784 L639.375,810.794 L645.3594,810.794 L645.3594,809.419 L641.0156,809.419 L641.0156,807.3409 Z "/><ellipse cx="658.5" cy="805.794" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="665.5" y="810.413">GestureSignal</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="631.5" x2="736.5" y1="819.794" y2="819.794"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="636.5" y="834.0129">DragBegin</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="59" x="636.5" y="847.2128">DragUpdate</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="636.5" y="860.4127">DragEnd</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="636.5" y="873.6126">LongPress</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="631.5" x2="736.5" y1="880.5936" y2="880.5936"/><!--MD5=[57dc7c53717205a055e270d1e3ca012b]
class GestureInterpretation--><rect codeLine="96" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="81.5997" id="GestureInterpretation" style="stroke: #1A66C2; stroke-width: 1.5;" width="130" x="338" y="963.794"/><ellipse cx="350" cy="976.794" fill="#EB937F" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M348.5156,977.3409 L352.3594,977.3409 L352.3594,975.9659 L348.5156,975.9659 L348.5156,974.1534 L352.6719,974.1534 L352.6719,972.7784 L346.875,972.7784 L346.875,980.794 L352.8594,980.794 L352.8594,979.419 L348.5156,979.419 L348.5156,977.3409 Z "/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="361" y="980.413">GestureInterpretation</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="339" x2="467" y1="989.794" y2="989.794"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="344" y="1004.0129">NoGesture</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="344" y="1017.2128">LongPress</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="344" y="1030.4127">Swipe</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="339" x2="467" y1="1037.3937" y2="1037.3937"/><!--MD5=[4fb32d4831d457097ae866f3cb0e0da7]
class GestureModel--><rect codeLine="102" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="81.5997" id="GestureModel" style="stroke: #1A66C2; stroke-width: 1.5;" width="418" x="119" y="800.294"/><ellipse cx="284" cy="813.294" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M287.5,811.9971 C287.4531,811.294 287.2969,810.8565 286.9688,810.4034 C286.3438,809.5909 285.3594,809.1377 284.1563,809.1377 C281.8906,809.1377 280.4844,810.7627 280.4844,813.3565 C280.4844,815.9346 281.875,817.544 284.1094,817.544 C286.1094,817.544 287.4375,816.3877 287.5313,814.5596 L285.9219,814.5596 C285.8125,815.5752 285.1875,816.1534 284.1563,816.1534 C282.875,816.1534 282.1406,815.1221 282.1406,813.3721 C282.1406,811.6065 282.9219,810.544 284.2188,810.544 C285.1719,810.544 285.7031,811.0127 285.9219,811.9971 L287.5,811.9971 Z "/><ellipse cx="305" cy="812.294" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="312" y="816.913">GestureModel</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="120" x2="536" y1="826.294" y2="826.294"/><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="120" x2="536" y1="834.294" y2="834.294"/><ellipse cx="130" cy="845.294" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="103" x="136" y="848.5129">new(): GestureModel</text><ellipse cx="130" cy="858.4939" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="395" x="136" y="861.7128">convert_to_interaction(x: f64, y: f64, input: GestureSignal): ((f64, f64), Interaction)</text><ellipse cx="130" cy="871.6938" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="136" y="874.9127">get_swipe_path(): Vec&lt;Point&gt;</text><ellipse cx="1178" cy="336.794" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" rx="5" ry="5" style="stroke: #1A66C2; stroke-width: 1.5;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="70" x="1143" y="352.0129">"relm::Update"</text><ellipse cx="492" cy="336.794" fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" rx="5" ry="5" style="stroke: #1A66C2; stroke-width: 1.5;"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="458" y="352.0129">"relm::Widget"</text><!--MD5=[4b4d3704d53885d7ba1be4905c43df78]
class dbus.DBusService--><rect fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="42" id="dbus.DBusService" style="stroke: #1A66C2; stroke-width: 1.5;" width="90" x="1974" y="820.294"/><ellipse cx="1986" cy="833.294" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M1989.5,831.9971 C1989.4531,831.294 1989.2969,830.8565 1988.9688,830.4034 C1988.3438,829.5909 1987.3594,829.1377 1986.1563,829.1377 C1983.8906,829.1377 1982.4844,830.7627 1982.4844,833.3565 C1982.4844,835.9346 1983.875,837.544 1986.1094,837.544 C1988.1094,837.544 1989.4375,836.3877 1989.5313,834.5596 L1987.9219,834.5596 C1987.8125,835.5752 1987.1875,836.1534 1986.1563,836.1534 C1984.875,836.1534 1984.1406,835.1221 1984.1406,833.3721 C1984.1406,831.6065 1984.9219,830.544 1986.2188,830.544 C1987.1719,830.544 1987.7031,831.0127 1987.9219,831.9971 L1989.5,831.9971 Z "/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="64" x="1997" y="836.913">DBusService</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1975" x2="2063" y1="846.294" y2="846.294"/><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1975" x2="2063" y1="854.294" y2="854.294"/><!--MD5=[7329b948e99d19466e7810f1e3d913b8]
class submitter.layer_shell--><rect fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="42" id="submitter.layer_shell" style="stroke: #1A66C2; stroke-width: 1.5;" width="78" x="1974" y="315.794"/><ellipse cx="1986" cy="328.794" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M1989.5,327.4971 C1989.4531,326.794 1989.2969,326.3565 1988.9688,325.9034 C1988.3438,325.0909 1987.3594,324.6377 1986.1563,324.6377 C1983.8906,324.6377 1982.4844,326.2627 1982.4844,328.8565 C1982.4844,331.4346 1983.875,333.044 1986.1094,333.044 C1988.1094,333.044 1989.4375,331.8877 1989.5313,330.0596 L1987.9219,330.0596 C1987.8125,331.0752 1987.1875,331.6534 1986.1563,331.6534 C1984.875,331.6534 1984.1406,330.6221 1984.1406,328.8721 C1984.1406,327.1065 1984.9219,326.044 1986.2188,326.044 C1987.1719,326.044 1987.7031,326.5127 1987.9219,327.4971 L1989.5,327.4971 Z "/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="52" x="1997" y="332.413">layer_shell</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1975" x2="2051" y1="341.794" y2="341.794"/><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1975" x2="2051" y1="349.794" y2="349.794"/><!--MD5=[0d4effa8c0d2d5f22de6356d0183243f]
class keyboard.Keyboard--><rect fill="#CCCCCC" filter="url(#f1rgeo1avhmkd1)" height="42" id="keyboard.Keyboard" style="stroke: #1A66C2; stroke-width: 1.5;" width="73" x="1974.5" y="591.294"/><ellipse cx="1986.5" cy="604.294" fill="#1A66C2" rx="8" ry="8" style="stroke: #1A66C2; stroke-width: 1.0;"/><path d="M1990,602.9971 C1989.9531,602.294 1989.7969,601.8565 1989.4688,601.4034 C1988.8438,600.5909 1987.8594,600.1377 1986.6563,600.1377 C1984.3906,600.1377 1982.9844,601.7627 1982.9844,604.3565 C1982.9844,606.9346 1984.375,608.544 1986.6094,608.544 C1988.6094,608.544 1989.9375,607.3877 1990.0313,605.5596 L1988.4219,605.5596 C1988.3125,606.5752 1987.6875,607.1534 1986.6563,607.1534 C1985.375,607.1534 1984.6406,606.1221 1984.6406,604.3721 C1984.6406,602.6065 1985.4219,601.544 1986.7188,601.544 C1987.6719,601.544 1988.2031,602.0127 1988.4219,602.9971 L1990,602.9971 Z "/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="47" x="1997.5" y="607.913">Keyboard</text><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1975.5" x2="2046.5" y1="617.294" y2="617.294"/><line style="stroke: #1A66C2; stroke-width: 1.5;" x1="1975.5" x2="2046.5" y1="625.294" y2="625.294"/><!--MD5=[3c6e6a537c409c8777341be1195f327f]
reverse link Model to GestureModel--><path codeLine="108" d="M403.4,645.804 C387.62,686.494 360.61,756.174 343.56,800.154 " fill="none" id="Model-backto-GestureModel" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="408.19,633.434,402.2906,637.5809,403.8496,644.6215,409.749,640.4746,408.19,633.434" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[e5d5797d4e755da255b05d574d02f567]
reverse link Widgets to Suggestions--><path codeLine="109" d="M1078,685.964 C1078,723.724 1078,768.444 1078,799.994 " fill="none" id="Widgets-backto-Suggestions" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="1078,672.934,1074,678.934,1078,684.934,1082,678.934,1078,672.934" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[123866860a100eeaac738bf44e84d7a2]
reverse link Win to Model--><path codeLine="110" d="M545.84,436.934 C533.74,444.234 522.06,452.014 511,460.294 C465.01,494.724 435.79,558.544 423.18,591.084 " fill="none" id="Win-backto-Model" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="557.07,430.364,549.871,429.9463,546.7166,436.4309,553.9156,436.8486,557.07,430.364" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[0d413e6557b0ef06b11981d7c92e9836]
reverse link Win to Widgets--><path codeLine="111" d="M926.1,440.334 C959.38,477.784 995.91,518.904 1024.8,551.424 " fill="none" id="Win-backto-Widgets" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="917.27,430.384,918.2698,437.5254,925.2465,439.3493,924.2467,432.2078,917.27,430.384" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[b9de35f75834ba6be8fbd81cb13a4afa]
reverse link Win to Gestures--><path codeLine="112" d="M786.77,442.494 C764.59,490.624 739.83,544.384 724.33,578.024 " fill="none" id="Win-backto-Gestures" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="792.34,430.384,786.1964,434.1597,787.3188,441.283,793.4624,437.5072,792.34,430.384" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[d4326c97b4f97629bcb73e612b666cdb]
link Win to Msg--><path codeLine="113" d="M532,427.354 C483.54,442.304 445.21,454.754 433,460.294 C404.5,473.224 375.32,488.934 347.5,505.274 " fill="none" id="Win-Msg" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#333333" points="440.6849,466.3377,433.1042,466.987,434.9336,471.3189,440.6849,466.3377" style="stroke: #333333; stroke-width: 1.0;"/><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="42" x="445" y="471.5129">receives</text><!--MD5=[c693da8a96a2a36e47cd78ead860951f]
reverse link Win to UIManager--><path codeLine="114" d="M1115,434.734 C1187.63,459.874 1265.95,486.984 1338.88,512.244 " fill="none" id="Win-backto-UIManager" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="1102.46,430.384,1106.8196,436.128,1113.7986,434.3129,1109.4389,428.5689,1102.46,430.384" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[23370221755e3e3d97fa0d625988b780]
link Win to Winlol22--><path d="M1138.14,336.794 C1149.66,336.794 1161.18,336.794 1172.71,336.794 " fill="none" id="Win-Winlol22" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[97155906f25fa97e46c0758925b52623]
link Winlol25 to Win--><path d="M497.02,336.794 C508.58,336.794 520.13,336.794 531.68,336.794 " fill="none" id="Winlol25-Win" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[0d800c5b3a13a7b57317496d080dbe7b]
link UIManager to Msg--><path codeLine="117" d="M1348.07,512.254 C1336.97,509.664 1325.92,507.324 1315,505.294 C1107.44,466.714 566.19,441.354 365,505.294 C359.4,507.074 353.8,509.064 348.21,511.244 " fill="none" id="UIManager-Msg" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#333333" points="679.5,467.8899,686.7337,470.2483,686.7384,465.5461,679.5,467.8899" style="stroke: #333333; stroke-width: 1.0;"/><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="26" x="691.5" y="471.5129">emits</text><!--MD5=[1d63b4c3ba765f65f6b2b69aa129016e]
reverse link UIManager to dbus.DBusService--><path codeLine="118" d="M1869.28,718.534 C1891.72,730.974 1913.65,744.274 1934,758.294 C1960.01,776.204 1985.48,802.244 2001.66,820.144 " fill="none" id="UIManager-backto-dbus.DBusService" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="1857.87,712.304,1861.2175,718.691,1868.4007,718.0576,1865.0532,711.6706,1857.87,712.304" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[4e78aa42c583f26133d36fb71f0d77f3]
reverse link GestureModel to GestureInterpretation--><path codeLine="119" d="M364.25,893.324 C369.29,901.614 374.07,910.274 378,918.794 C384.51,932.904 389.78,949.104 393.76,963.564 " fill="none" id="GestureModel-backto-GestureInterpretation" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="357.3,882.304,357.1241,889.5129,363.7109,892.448,363.8868,885.239,357.3,882.304" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[811788a094b3de7be30865dda6564cfd]
link GestureModel to Point--><path codeLine="120" d="M298.33,882.454 C291.1,893.754 284.02,906.364 279,918.794 C273.31,932.894 269.47,949.094 266.89,963.544 " fill="none" id="GestureModel-Point" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#333333" points="281.554,930.1234,286.362,924.2266,281.9777,922.5268,281.554,930.1234" style="stroke: #333333; stroke-width: 1.0;"/><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="291" y="930.0129">describe gesture</text><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="6" x="287.3274" y="900.0168">1</text><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="238.464" y="952.904">many</text><!--MD5=[891635bdec6345140c38d72772154d6d]
link GridBuilder to Win--><path codeLine="121" d="M1124.26,168.394 C1085.5,190.814 1039.21,217.604 995.15,243.114 " fill="none" id="GridBuilder-Win" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#333333" points="1070.538,207.8975,1077.9785,206.3079,1075.6232,202.2381,1070.538,207.8975" style="stroke: #333333; stroke-width: 1.0;"/><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="37" x="1082" y="209.5129">creates</text><!--MD5=[fc921dd3a0de2a123b0cf69c8cc90c60]
link GridBuilder to submitter.layer_shell--><path codeLine="122" d="M1650.74,168.344 C1770.66,188.334 1882.09,213.554 1934,243.294 C1964.24,260.614 1988.31,294.034 2001.61,315.604 " fill="none" id="GridBuilder-submitter.layer_shell" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#333333" points="1859.6883,207.4419,1853.926,202.4736,1852.1062,206.8095,1859.6883,207.4419" style="stroke: #333333; stroke-width: 1.0;"/><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="1864" y="209.5129">calls method</text><!--MD5=[111c22adde44e3993712468779078efb]
link Win to GestureSignal--><path codeLine="123" d="M607.54,430.454 C579.82,451.054 555.24,475.774 538,505.294 C490.03,587.424 497.54,633.214 538,719.294 C557.05,759.814 597.06,791.434 630.39,812.164 " fill="none" id="Win-GestureSignal" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#333333" points="542.239,616.3868,544.1536,609.0232,539.4597,609.3041,542.239,616.3868" style="stroke: #333333; stroke-width: 1.0;"/><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="26" x="550" y="616.0129">emits</text><!--MD5=[0bd9bebb325bc92935dc0397b6ffd9f9]
link GestureModel to GestureSignal--><path codeLine="124" d="M537.15,841.294 C571.65,841.294 604.55,841.294 630.43,841.294 " fill="none" id="GestureModel-GestureSignal" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#333333" points="562.25,830.8939,555.0139,828.5428,555.0139,833.2451,562.25,830.8939" style="stroke: #333333; stroke-width: 1.0;"/><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="46" x="566.25" y="834.5129">interprets</text><!--MD5=[629c3b7ee07e2be18ffa56d54d1ab78e]
reverse link Win to keyboard.Keyboard--><path codeLine="127" d="M1151.34,429.394 C1152.89,429.694 1154.45,429.994 1156,430.294 C1326.62,462.814 1783.21,419.094 1934,505.294 C1968.16,524.824 1991.32,566.364 2002.74,591.254 " fill="none" id="Win-backto-keyboard.Keyboard" style="stroke: #000000; stroke-width: 1.0;"/><polygon fill="#000000" points="1138.35,426.784,1143.4402,431.8918,1150.1129,429.1577,1145.0227,424.0499,1138.35,426.784" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[699abebc0d71a335b42a7987badf1ba8]
@startuml user_interface
!define LIGHTBLUE
!includeurl https://raw.githubusercontent.com/grelltrier/RedDress-PlantUML/master/style.puml

package user_interface {

    +class Model {
    }
    +enum Msg {
        {field} GestureSignal(f64, f64, GestureSignal)
        {field} ButtonInteraction(String, String, String, TapMotion),
        {field} OpenPopup(String)
        {field} SubmitText(String)
        {field} Suggestions((Option<String>, Option<String>, Option<String>))
        {field} SetVisibility(bool)
        {field} HintPurpose(ContentHint, ContentPurpose)
        {field} ChangeUILayoutView(Option<String>, Option<String>)
        {field} ChangeUIOrientation(Orientation)
        {field} ChangeKBLayoutView(String, String)
        {field} PollEvents
        {field} UpdateDrawBuffer
        {field} Quit
    }

    class Gestures {
        {field} long_press_gesture: gtk::GestureLongPress
        {field} drag_gesture: gtk::GestureDrag
    }

    class Suggestions {
        {field} left: gtk::Button
        {field} center: gtk::Button
        {field} right: gtk::Button
    }

    class Widgets {
        {field} window: gtk::Window
        {field} _overlay: gtk::Overlay
        {field} _draw_handler: relm::DrawHandler<gtk::DrawingArea>
        {field} suggestions: Suggestions
        {field} stack: gtk::Stack
        {field} key_refs: HashMap<(String, String, String), (gtk::ToggleButton, Option<gtk::Popover>)>,
    }

    +class Win {
        {field} +relm: relm::Relm
        {field} _channel: Channel<Msg>

        {method} get_rel_coordinates(x: f64, y: f64): (i32, i32)
        {method} erase_path()
        {method} draw_path() 
        {method} update_suggestions(left: Option<String>, center: Option<String>, right: Option<String>)

        {method} {static} load_css()
        {method} {static} make_suggestions_and_pref_buttons(relm: &relm::Relm<super::Win>, keyboard: &keyboard::Keyboard): Vec<gtk::Button>
        {method} {static} make_pref_button(relm: &relm::Relm<super::Win>, layout_names: Vec<&String>): gtk::Button
        {method} {static} make_suggestion_buttons(relm: &relm::Relm<super::Win>): Vec<gtk::Button>
    }

    +abstract class GridBuilder{
        {method} +make_stack(relm: &relm::Relm<Win>, layout_meta_hashmap: HashMap<String, LayoutMeta>): (Stack, HashMap<ButtonId, (ToggleButton, Option<Popover>)>)
        make_grid(relm: &relm::Relm<Win>, view_arrangement: &KeyArrangement, view_keys: &HashMap<String, KeyMeta>): (Grid, HashMap<String, (ToggleButton, Option<Popover>)>)
        {method} make_button(key_id: &str, key_meta: &KeyMeta): ToggleButton
        {method} attach_popover(relm: &relm::Relm<Win>,button: ToggleButton, key_meta: &KeyMeta): Option<Popover>
        {method} +make_grid_name(layout_name: &str, view_name: &str): String
    }

    +class UIManager {
        {field} sender: Sender<Msg>
        {field} window: Window
        {field} stack: Stack
        {field} +current_layout_view: (String, String)
        {field} prev_layout: String

        {method} +new(sender: Sender<super::Msg>, window: Window, stack: Stack, current_layout_view: (String, String)): UIManager
        {method} +haptic_feedback(is_press: bool)
        {method} +change_visibility(new_visibility: bool)
        {method} +change_hint_purpose(content_hint: ContentHint, content_purpose: ContentPurpose)
        {method} +change_orientation(orientation: Orientation)
        {method} +change_layout_view(new_layout: &Option<String>, new_view: Option<String>): Result<(), UIError>
        {method} make_new_layout_view_name(new_layout: &Option<String>, new_view: Option<String>): (String, String)
    }

    +class Point {
        {field} +x: f64
        {field} +y: f64
        {field} +time: Instant
    }
    
    +enum GestureSignal {
        {field} DragBegin
        {field} DragUpdate
        {field} DragEnd
        {field} LongPress
    }

    enum GestureInterpretation {
        {field} NoGesture
        {field} LongPress
        {field} Swipe
    }

    +class GestureModel {
        {method} +new(): GestureModel
        {method} +convert_to_interaction(x: f64, y: f64, input: GestureSignal): ((f64, f64), Interaction)
        {method} +get_swipe_path(): Vec<Point> 
    }

    Model *- - GestureModel
    Widgets *- - Suggestions
    Win *- - Model
    Win *- - Widgets
    Win *- - Gestures
    Win - Msg: < receives
    Win *- - UIManager
    Win -() "relm::Update"
    "relm::Widget" ()- Win
    UIManager - Msg: > emits
    UIManager *- - dbus.DBusService
    GestureModel *- - GestureInterpretation
    GestureModel "1" - - "many" Point: > describe gesture
    GridBuilder - - Win : > creates
    GridBuilder - - submitter.layer_shell : > calls method
    Win - - GestureSignal : > emits
    GestureModel - GestureSignal : > interprets

    ' The following are structs from other packages
    Win *- - keyboard.Keyboard

}
@enduml

@startuml user_interface




skinparam stereotypeCBackgroundColor 1a66c2







skinparam backgroundColor fff








skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Verdana
}

skinparam class {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}


skinparam ActivityBarColor 1a66c2
skinparam activityDiamondBackgroundColor ccc
skinparam activityDiamondBorderColor 1a66c2


skinparam actor {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam interface {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam node {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam database {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam queue {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 2a86e2
  lifeLineBackgroundColor e0e0e0
}

skinparam boundary {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam control {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam entity {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam state {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
  startColor 2a86e2
  endColor 1a66c2
}


skinparam object {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
}


skinparam note {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam cloud {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
}

skinparam rectangle {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam storage {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


package user_interface {

    +class Model {
    }
    +enum Msg {
        {field} GestureSignal(f64, f64, GestureSignal)
        {field} ButtonInteraction(String, String, String, TapMotion),
        {field} OpenPopup(String)
        {field} SubmitText(String)
        {field} Suggestions((Option<String>, Option<String>, Option<String>))
        {field} SetVisibility(bool)
        {field} HintPurpose(ContentHint, ContentPurpose)
        {field} ChangeUILayoutView(Option<String>, Option<String>)
        {field} ChangeUIOrientation(Orientation)
        {field} ChangeKBLayoutView(String, String)
        {field} PollEvents
        {field} UpdateDrawBuffer
        {field} Quit
    }

    class Gestures {
        {field} long_press_gesture: gtk::GestureLongPress
        {field} drag_gesture: gtk::GestureDrag
    }

    class Suggestions {
        {field} left: gtk::Button
        {field} center: gtk::Button
        {field} right: gtk::Button
    }

    class Widgets {
        {field} window: gtk::Window
        {field} _overlay: gtk::Overlay
        {field} _draw_handler: relm::DrawHandler<gtk::DrawingArea>
        {field} suggestions: Suggestions
        {field} stack: gtk::Stack
        {field} key_refs: HashMap<(String, String, String), (gtk::ToggleButton, Option<gtk::Popover>)>,
    }

    +class Win {
        {field} +relm: relm::Relm
        {field} _channel: Channel<Msg>

        {method} get_rel_coordinates(x: f64, y: f64): (i32, i32)
        {method} erase_path()
        {method} draw_path() 
        {method} update_suggestions(left: Option<String>, center: Option<String>, right: Option<String>)

        {method} {static} load_css()
        {method} {static} make_suggestions_and_pref_buttons(relm: &relm::Relm<super::Win>, keyboard: &keyboard::Keyboard): Vec<gtk::Button>
        {method} {static} make_pref_button(relm: &relm::Relm<super::Win>, layout_names: Vec<&String>): gtk::Button
        {method} {static} make_suggestion_buttons(relm: &relm::Relm<super::Win>): Vec<gtk::Button>
    }

    +abstract class GridBuilder{
        {method} +make_stack(relm: &relm::Relm<Win>, layout_meta_hashmap: HashMap<String, LayoutMeta>): (Stack, HashMap<ButtonId, (ToggleButton, Option<Popover>)>)
        make_grid(relm: &relm::Relm<Win>, view_arrangement: &KeyArrangement, view_keys: &HashMap<String, KeyMeta>): (Grid, HashMap<String, (ToggleButton, Option<Popover>)>)
        {method} make_button(key_id: &str, key_meta: &KeyMeta): ToggleButton
        {method} attach_popover(relm: &relm::Relm<Win>,button: ToggleButton, key_meta: &KeyMeta): Option<Popover>
        {method} +make_grid_name(layout_name: &str, view_name: &str): String
    }

    +class UIManager {
        {field} sender: Sender<Msg>
        {field} window: Window
        {field} stack: Stack
        {field} +current_layout_view: (String, String)
        {field} prev_layout: String

        {method} +new(sender: Sender<super::Msg>, window: Window, stack: Stack, current_layout_view: (String, String)): UIManager
        {method} +haptic_feedback(is_press: bool)
        {method} +change_visibility(new_visibility: bool)
        {method} +change_hint_purpose(content_hint: ContentHint, content_purpose: ContentPurpose)
        {method} +change_orientation(orientation: Orientation)
        {method} +change_layout_view(new_layout: &Option<String>, new_view: Option<String>): Result<(), UIError>
        {method} make_new_layout_view_name(new_layout: &Option<String>, new_view: Option<String>): (String, String)
    }

    +class Point {
        {field} +x: f64
        {field} +y: f64
        {field} +time: Instant
    }
    
    +enum GestureSignal {
        {field} DragBegin
        {field} DragUpdate
        {field} DragEnd
        {field} LongPress
    }

    enum GestureInterpretation {
        {field} NoGesture
        {field} LongPress
        {field} Swipe
    }

    +class GestureModel {
        {method} +new(): GestureModel
        {method} +convert_to_interaction(x: f64, y: f64, input: GestureSignal): ((f64, f64), Interaction)
        {method} +get_swipe_path(): Vec<Point> 
    }

    Model *- - GestureModel
    Widgets *- - Suggestions
    Win *- - Model
    Win *- - Widgets
    Win *- - Gestures
    Win - Msg: < receives
    Win *- - UIManager
    Win -() "relm::Update"
    "relm::Widget" ()- Win
    UIManager - Msg: > emits
    UIManager *- - dbus.DBusService
    GestureModel *- - GestureInterpretation
    GestureModel "1" - - "many" Point: > describe gesture
    GridBuilder - - Win : > creates
    GridBuilder - - submitter.layer_shell : > calls method
    Win - - GestureSignal : > emits
    GestureModel - GestureSignal : > interprets

    Win *- - keyboard.Keyboard

}
@enduml

PlantUML version 1.2020.19(Mon Oct 12 17:10:01 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>