<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="500px" preserveAspectRatio="none" style="width:657px;height:500px;" version="1.1" viewBox="0 0 657 500" width="657px" zoomAndPan="magnify"><defs><filter height="300%" id="fk0agt8k8uvdi" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fk0agt8k8uvdi)" height="472.7994" style="stroke: #000000; stroke-width: 2.0;" width="629" x="11" y="11"/><path d="M165,11 L165,20.7999 L155,30.7999 L11,30.7999 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="144" x="14" y="25.0059">VKService::send_key()</text><ellipse cx="445.6875" cy="50.7999" fill="#000000" filter="url(#fk0agt8k8uvdi)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><polygon fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" points="408.6875,80.7999,482.6875,80.7999,494.6875,92.7999,482.6875,104.7999,408.6875,104.7999,396.6875,92.7999,408.6875,80.7999" style="stroke: #1A66C2; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="74" x="408.6875" y="96.4189">Keycode valid?</text><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="378.6875" y="89.8189">yes</text><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="494.6875" y="89.8189">no</text><polygon fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" points="265.875,114.7999,377.875,114.7999,389.875,126.7999,377.875,138.7999,265.875,138.7999,253.875,126.7999,265.875,114.7999" style="stroke: #1A66C2; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="265.875" y="130.4189">virtual_keyboard proxy</text><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="231.875" y="123.8189">alive</text><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="389.875" y="123.8189">not alive</text><polygon fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" points="179.25,148.7999,229.25,148.7999,241.25,160.7999,229.25,172.7999,179.25,172.7999,167.25,160.7999,179.25,148.7999" style="stroke: #1A66C2; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="50" x="179.25" y="164.4189">keymotion</text><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="28" x="139.25" y="157.8189">press</text><text fill="#333333" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="241.25" y="157.8189">release</text><rect fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" height="33.1999" rx="12.5" ry="12.5" style="stroke: #1A66C2; stroke-width: 1.5;" width="180" x="23" y="182.7999"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="33" y="203.0189">Remove key from pressed_keys</text><rect fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" height="33.1999" rx="12.5" ry="12.5" style="stroke: #1A66C2; stroke-width: 1.5;" width="145" x="223" y="182.7999"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="233" y="203.0189">Add key to pressed_keys</text><polygon fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" points="204.25,221.9998,216.25,233.9998,204.25,245.9998,192.25,233.9998,204.25,221.9998" style="stroke: #1A66C2; stroke-width: 1.5;"/><rect fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" height="46.3998" rx="12.5" ry="12.5" style="stroke: #1A66C2; stroke-width: 1.5;" width="178" x="115.25" y="270.1997"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="125.25" y="290.4187">Use virtual_keyboard protocol to</text><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="124" x="125.25" y="303.6186">press/release of keycode</text><rect fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" height="33.1999" style="stroke: #1A66C2; stroke-width: 1.5;" width="51" x="178.75" y="336.5995"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="31" x="188.75" y="356.8185">Ok(())</text><rect fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" height="33.1999" rx="12.5" ry="12.5" style="stroke: #1A66C2; stroke-width: 1.5;" width="68" x="405.5" y="148.7999"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="415.5" y="169.0189">Emit error</text><rect fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" height="33.1999" style="stroke: #1A66C2; stroke-width: 1.5;" width="83" x="398" y="216.9998"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="63" x="408" y="237.2188">Err(NotAlive)</text><polygon fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" points="321.875,375.7994,333.875,387.7994,321.875,399.7994,309.875,387.7994,321.875,375.7994" style="stroke: #1A66C2; stroke-width: 1.5;"/><rect fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" height="33.1999" rx="12.5" ry="12.5" style="stroke: #1A66C2; stroke-width: 1.5;" width="68" x="535.5" y="114.7999"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="545.5" y="135.0189">Emit error</text><rect fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" height="33.1999" style="stroke: #1A66C2; stroke-width: 1.5;" width="117" x="511" y="182.9998"/><text fill="#000000" font-family="Verdana" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="521" y="203.2188">Err(InvalidKeycode)</text><polygon fill="#CCCCCC" filter="url(#fk0agt8k8uvdi)" points="445.6875,405.7994,457.6875,417.7994,445.6875,429.7994,433.6875,417.7994,445.6875,405.7994" style="stroke: #1A66C2; stroke-width: 1.5;"/><ellipse cx="445.6875" cy="460.7994" fill="#FFFFFF" filter="url(#fk0agt8k8uvdi)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="445.6875" cy="460.7994" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="167.25" x2="113" y1="160.7999" y2="160.7999"/><line style="stroke: #000000; stroke-width: 1.5;" x1="113" x2="113" y1="160.7999" y2="182.7999"/><polygon fill="#000000" points="109,172.7999,113,182.7999,117,172.7999,113,176.7999" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="241.25" x2="295.5" y1="160.7999" y2="160.7999"/><line style="stroke: #000000; stroke-width: 1.5;" x1="295.5" x2="295.5" y1="160.7999" y2="182.7999"/><polygon fill="#000000" points="291.5,172.7999,295.5,182.7999,299.5,172.7999,295.5,176.7999" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="113" x2="113" y1="215.9998" y2="233.9998"/><line style="stroke: #000000; stroke-width: 1.5;" x1="113" x2="192.25" y1="233.9998" y2="233.9998"/><polygon fill="#000000" points="182.25,229.9998,192.25,233.9998,182.25,237.9998,186.25,233.9998" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="295.5" x2="295.5" y1="215.9998" y2="233.9998"/><line style="stroke: #000000; stroke-width: 1.5;" x1="295.5" x2="216.25" y1="233.9998" y2="233.9998"/><polygon fill="#000000" points="226.25,229.9998,216.25,233.9998,226.25,237.9998,222.25,233.9998" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="204.25" x2="204.25" y1="245.9998" y2="270.1997"/><polygon fill="#000000" points="200.25,260.1997,204.25,270.1997,208.25,260.1997,204.25,264.1997" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="204.25" x2="204.25" y1="316.5995" y2="336.5995"/><polygon fill="#000000" points="200.25,326.5995,204.25,336.5995,208.25,326.5995,204.25,330.5995" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="439.5" x2="439.5" y1="181.9998" y2="216.9998"/><polygon fill="#000000" points="435.5,206.9998,439.5,216.9998,443.5,206.9998,439.5,210.9998" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="253.875" x2="204.25" y1="126.7999" y2="126.7999"/><line style="stroke: #000000; stroke-width: 1.5;" x1="204.25" x2="204.25" y1="126.7999" y2="148.7999"/><polygon fill="#000000" points="200.25,138.7999,204.25,148.7999,208.25,138.7999,204.25,142.7999" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="389.875" x2="439.5" y1="126.7999" y2="126.7999"/><line style="stroke: #000000; stroke-width: 1.5;" x1="439.5" x2="439.5" y1="126.7999" y2="148.7999"/><polygon fill="#000000" points="435.5,138.7999,439.5,148.7999,443.5,138.7999,439.5,142.7999" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="204.25" x2="204.25" y1="369.7994" y2="387.7994"/><line style="stroke: #000000; stroke-width: 1.5;" x1="204.25" x2="309.875" y1="387.7994" y2="387.7994"/><polygon fill="#000000" points="299.875,383.7994,309.875,387.7994,299.875,391.7994,303.875,387.7994" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="439.5" x2="439.5" y1="250.1997" y2="387.7994"/><line style="stroke: #000000; stroke-width: 1.5;" x1="439.5" x2="333.875" y1="387.7994" y2="387.7994"/><polygon fill="#000000" points="343.875,383.7994,333.875,387.7994,343.875,391.7994,339.875,387.7994" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="569.5" x2="569.5" y1="147.9998" y2="182.9998"/><polygon fill="#000000" points="565.5,172.9998,569.5,182.9998,573.5,172.9998,569.5,176.9998" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="396.6875" x2="321.875" y1="92.7999" y2="92.7999"/><line style="stroke: #000000; stroke-width: 1.5;" x1="321.875" x2="321.875" y1="92.7999" y2="114.7999"/><polygon fill="#000000" points="317.875,104.7999,321.875,114.7999,325.875,104.7999,321.875,108.7999" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="494.6875" x2="569.5" y1="92.7999" y2="92.7999"/><line style="stroke: #000000; stroke-width: 1.5;" x1="569.5" x2="569.5" y1="92.7999" y2="114.7999"/><polygon fill="#000000" points="565.5,104.7999,569.5,114.7999,573.5,104.7999,569.5,108.7999" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="321.875" x2="321.875" y1="399.7994" y2="417.7994"/><line style="stroke: #000000; stroke-width: 1.5;" x1="321.875" x2="433.6875" y1="417.7994" y2="417.7994"/><polygon fill="#000000" points="423.6875,413.7994,433.6875,417.7994,423.6875,421.7994,427.6875,417.7994" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="569.5" x2="569.5" y1="216.1997" y2="417.7994"/><line style="stroke: #000000; stroke-width: 1.5;" x1="569.5" x2="457.6875" y1="417.7994" y2="417.7994"/><polygon fill="#000000" points="467.6875,413.7994,457.6875,417.7994,467.6875,421.7994,463.6875,417.7994" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="445.6875" x2="445.6875" y1="60.7999" y2="80.7999"/><polygon fill="#000000" points="441.6875,70.7999,445.6875,80.7999,449.6875,70.7999,445.6875,74.7999" style="stroke: #000000; stroke-width: 1.0;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="445.6875" x2="445.6875" y1="429.7994" y2="449.7994"/><polygon fill="#000000" points="441.6875,439.7994,445.6875,449.7994,449.6875,439.7994,445.6875,443.7994" style="stroke: #000000; stroke-width: 1.0;"/><!--MD5=[4268ed021166b99e3e8d07c6d1e1a228]
@startuml vkservice_send_key
!define LIGHTBLUE
!includeurl https://raw.githubusercontent.com/grelltrier/RedDress-PlantUML/master/style.puml

partition "VKService::send_key()"{
  start
    if (Keycode valid?) then (yes)
      if (virtual_keyboard proxy) then (alive)
        if (keymotion) then (press)
          :Remove key from pressed_keys;
        else (release)
          :Add key to pressed_keys;
        endif
        :Use virtual_keyboard protocol to
        press/release of keycode;
        :Ok(())]

      else (not alive)
        :Emit error;
        :Err(NotAlive)]
      endif

    else (no)
      :Emit error;
      :Err(InvalidKeycode)]
    endif
  stop
@enduml

@startuml vkservice_send_key




skinparam stereotypeCBackgroundColor 1a66c2







skinparam backgroundColor fff








skinparam circledCharacter {
  radius 8
  fontSize 11
  fontName Verdana
}

skinparam class {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11

  attributeFontColor 333
  attributeFontSize 11
  attributeIconSize 11
}


skinparam ActivityBarColor 1a66c2
skinparam activityDiamondBackgroundColor ccc
skinparam activityDiamondBorderColor 1a66c2


skinparam actor {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam participant {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam collections {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam SequenceBox{
    backgroundColor e0e0e0
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam interface {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam component {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam node {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam database {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam queue {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam usecase {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
}

skinparam activity {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
}

skinparam sequence {
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11

  lifeLineBorderColor 2a86e2
  lifeLineBackgroundColor e0e0e0
}

skinparam boundary {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam control {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam entity {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


skinparam state {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
  startColor 2a86e2
  endColor 1a66c2
}


skinparam object {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
}


skinparam note {
    backgroundColor 2a86e2
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam cloud {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
    arrowColor 000
  arrowFontName Verdana
  arrowFontColor 333
  arrowFontSize 11
}

skinparam rectangle {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}

skinparam storage {
    backgroundColor ccc
  borderColor 1a66c2
    fontColor 000
  fontName Verdana
  fontSize 11
  stereotypeFontColor 333
  stereotypeFontSize 11
}


partition "VKService::send_key()"{
  start
    if (Keycode valid?) then (yes)
      if (virtual_keyboard proxy) then (alive)
        if (keymotion) then (press)
          :Remove key from pressed_keys;
        else (release)
          :Add key to pressed_keys;
        endif
        :Use virtual_keyboard protocol to
        press/release of keycode;
        :Ok(())]

      else (not alive)
        :Emit error;
        :Err(NotAlive)]
      endif

    else (no)
      :Emit error;
      :Err(InvalidKeycode)]
    endif
  stop
@enduml

PlantUML version 1.2020.19(Mon Oct 12 17:10:01 CEST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>