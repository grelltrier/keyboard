<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1335px" preserveAspectRatio="none" style="width:573px;height:1335px;" version="1.1" viewBox="0 0 573 1335" width="573px" zoomAndPan="magnify"><defs><filter height="300%" id="fzzy5f5zzv4kp" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fzzy5f5zzv4kp)" height="1307.9202" style="stroke: #000000; stroke-width: 2.0;" width="545.75" x="11" y="11"/><path d="M308,12 L308,20.7999 L298,30.7999 L11,30.7999 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="287" x="14" y="25.0059">VKService::release_all_keys_and_modifiers()</text><ellipse cx="278.5" cy="50.7999" fill="#000000" filter="url(#fzzy5f5zzv4kp)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FFFFFF" filter="url(#fzzy5f5zzv4kp)" height="674.5199" style="stroke: #000000; stroke-width: 2.0;" width="417" x="80" y="70.7999"/><path d="M206,71.7999 L206,80.5999 L196,90.5999 L80,90.5999 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="116" x="83" y="84.8059">release_all_keys()</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="212" y="107.5999"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="222" y="128.7479">Initialize return value</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="231.5" y="162"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="241.5" y="183.148">result = Ok(())</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="182" y="216.4001"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="173" x="192" y="237.5481">Get all pressed keys (keycodes)</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="297" x="130" y="326.5191"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="277" x="140" y="347.6672">VKService::send_keycode() to release the keycode</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="229.5" y="380.9192"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="239.5" y="402.0673">release_result</text><polygon fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" points="244,435.3193,313,435.3193,325,447.3193,313,459.3193,244,459.3193,232,447.3193,244,435.3193" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="69" x="244" y="450.9383">release_result</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="42" x="190" y="444.3383">success</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="325" y="444.3383">failure</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="48.8002" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="133" x="124" y="469.3193"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="113" x="134" y="490.4674">Remove key from list</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="85" x="134" y="504.8675">of pressed keys</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="179" x="277" y="469.3193"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="159" x="287" y="490.4674">release_all_keys_result = Err</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="330" y="538.1195"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="340" y="559.2676">Emit error</text><polygon fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" points="278.5,578.5196,290.5,590.5196,278.5,602.5196,266.5,590.5196,278.5,578.5196" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="231.5" y="622.5196"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="241.5" y="643.6677">Next keycode</text><polygon fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" points="210.5,270.8002,346.5,270.8002,358.5,282.8002,346.5,294.8002,210.5,294.8002,198.5,282.8002,210.5,270.8002" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="282.5" y="305.0191">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="136" x="210.5" y="286.4191">pressed keycode available?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="186.5" y="279.8192">no</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" style="stroke: #A80036; stroke-width: 1.5;" width="150" x="203.5" y="698.9197"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="130" x="213.5" y="720.0678">release_all_keys_result</text><rect fill="#FFFFFF" filter="url(#fzzy5f5zzv4kp)" height="378.0005" style="stroke: #000000; stroke-width: 2.0;" width="517" x="29.75" y="755.3198"/><path d="M184.75,756.3198 L184.75,765.1197 L174.75,775.1197 L29.75,775.1197 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="145" x="32.75" y="769.3257">release_all_modifiers()</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="208" x="174.5" y="792.1197"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="188" x="184.5" y="813.2678">Get bitflag of all modifiers released</text><rect fill="#FFFFFF" filter="url(#fzzy5f5zzv4kp)" height="284.8004" style="stroke: #000000; stroke-width: 2.0;" width="497" x="39.75" y="836.5198"/><path d="M202.75,837.5198 L202.75,846.3197 L192.75,856.3197 L39.75,856.3197 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="153" x="42.75" y="850.5258">send_modifiers_bitflag()</text><polygon fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" points="222.5,873.3197,334.5,873.3197,346.5,885.3197,334.5,897.3197,222.5,897.3197,210.5,885.3197,222.5,873.3197" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="112" x="222.5" y="888.9387">virtual_keyboard proxy</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="188.5" y="882.3388">alive</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="346.5" y="882.3388">not alive</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="48.8002" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="196" x="61.25" y="907.3197"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="176" x="71.25" y="928.4678">Use virtual_keyboard protocol to</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="165" x="71.25" y="942.8679">submit the new modifier bitflag</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="62.75" y="990.52"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="173" x="72.75" y="1011.6681">Remember the submitted bitflag</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" style="stroke: #A80036; stroke-width: 1.5;" width="199" x="59.75" y="1044.9201"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="179" x="69.75" y="1066.0682">release_modifiers_result = Ok(())</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="73" x="361.25" y="907.3197"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="53" x="371.25" y="928.4678">Emit error</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" style="stroke: #A80036; stroke-width: 1.5;" width="238" x="278.75" y="976.1199"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="218" x="288.75" y="997.268">release_modifiers_result = Err(NotAlive)</text><polygon fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" points="278.5,1085.3202,290.5,1097.3202,278.5,1109.3202,266.5,1097.3202,278.5,1085.3202" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" points="33,1153.3202,143,1153.3202,155,1165.3202,143,1177.3202,33,1177.3202,21,1165.3202,33,1153.3202" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="92" y="1187.5392">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="33" y="1168.9392">both results are Ok(())</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="41" y="1210.5201"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="74" x="51" y="1231.6682">result = Ok(())</text><polygon fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" points="187,1153.3202,329,1153.3202,341,1165.3202,329,1177.3202,187,1177.3202,175,1165.3202,187,1153.3202" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="262" y="1187.5392">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="187" y="1168.9392">one of the results is 'NotAlive'</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="12" x="341" y="1162.3393">no</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" style="stroke: #A80036; stroke-width: 1.5;" width="137" x="189.5" y="1210.5201"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="117" x="199.5" y="1231.6682">result = Err(NotAlive))</text><rect fill="#FEFECE" filter="url(#fzzy5f5zzv4kp)" height="34.4001" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="361" y="1206.9202"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="371" y="1228.0683">result = Err(InvalidKeycode))</text><ellipse cx="278.5" cy="1295.9202" fill="#FFFFFF" filter="url(#fzzy5f5zzv4kp)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="278.5" cy="1295.9202" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="142" y2="162"/><polygon fill="#A80036" points="274.5,152,278.5,162,282.5,152,278.5,156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="196.4001" y2="216.4001"/><polygon fill="#A80036" points="274.5,206.4001,278.5,216.4001,282.5,206.4001,278.5,210.4001" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="360.9192" y2="380.9192"/><polygon fill="#A80036" points="274.5,370.9192,278.5,380.9192,282.5,370.9192,278.5,374.9192" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="366.5" x2="366.5" y1="503.7194" y2="538.1195"/><polygon fill="#A80036" points="362.5,528.1195,366.5,538.1195,370.5,528.1195,366.5,532.1195" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="232" x2="190.5" y1="447.3193" y2="447.3193"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="190.5" x2="190.5" y1="447.3193" y2="469.3193"/><polygon fill="#A80036" points="186.5,459.3193,190.5,469.3193,194.5,459.3193,190.5,463.3193" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="325" x2="366.5" y1="447.3193" y2="447.3193"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="366.5" x2="366.5" y1="447.3193" y2="469.3193"/><polygon fill="#A80036" points="362.5,459.3193,366.5,469.3193,370.5,459.3193,366.5,463.3193" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="190.5" x2="190.5" y1="518.1195" y2="590.5196"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="190.5" x2="266.5" y1="590.5196" y2="590.5196"/><polygon fill="#A80036" points="256.5,586.5196,266.5,590.5196,256.5,594.5196,260.5,590.5196" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="366.5" x2="366.5" y1="572.5196" y2="590.5196"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="366.5" x2="290.5" y1="590.5196" y2="590.5196"/><polygon fill="#A80036" points="300.5,586.5196,290.5,590.5196,300.5,594.5196,296.5,590.5196" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="415.3193" y2="435.3193"/><polygon fill="#A80036" points="274.5,425.3193,278.5,435.3193,282.5,425.3193,278.5,429.3193" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="602.5196" y2="622.5196"/><polygon fill="#A80036" points="274.5,612.5196,278.5,622.5196,282.5,612.5196,278.5,616.5196" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="294.8002" y2="326.5191"/><polygon fill="#A80036" points="274.5,316.5191,278.5,326.5191,282.5,316.5191,278.5,320.5191" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="656.9197" y2="666.9197"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="478" y1="666.9197" y2="666.9197"/><polygon fill="#A80036" points="474,475.9194,478,465.9194,482,475.9194,478,471.9194" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="478" x2="478" y1="282.8002" y2="666.9197"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="478" x2="358.5" y1="282.8002" y2="282.8002"/><polygon fill="#A80036" points="368.5,278.8002,358.5,282.8002,368.5,286.8002,364.5,282.8002" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="198.5" x2="102" y1="282.8002" y2="282.8002"/><polygon fill="#A80036" points="98,461.9194,102,471.9194,106,461.9194,102,465.9194" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="102" y1="282.8002" y2="678.9197"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="278.5" y1="678.9197" y2="678.9197"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="678.9197" y2="698.9197"/><polygon fill="#A80036" points="274.5,688.9197,278.5,698.9197,282.5,688.9197,278.5,692.9197" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="250.8002" y2="270.8002"/><polygon fill="#A80036" points="274.5,260.8002,278.5,270.8002,282.5,260.8002,278.5,264.8002" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="60.7999" y2="107.5999"/><polygon fill="#A80036" points="274.5,97.5999,278.5,107.5999,282.5,97.5999,278.5,101.5999" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.25" x2="159.25" y1="956.1199" y2="990.52"/><polygon fill="#A80036" points="155.25,980.52,159.25,990.52,163.25,980.52,159.25,984.52" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.25" x2="159.25" y1="1024.9201" y2="1044.9201"/><polygon fill="#A80036" points="155.25,1034.9201,159.25,1044.9201,163.25,1034.9201,159.25,1038.9201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="397.75" x2="397.75" y1="941.7198" y2="976.1199"/><polygon fill="#A80036" points="393.75,966.1199,397.75,976.1199,401.75,966.1199,397.75,970.1199" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="210.5" x2="159.25" y1="885.3197" y2="885.3197"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.25" x2="159.25" y1="885.3197" y2="907.3197"/><polygon fill="#A80036" points="155.25,897.3197,159.25,907.3197,163.25,897.3197,159.25,901.3197" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="397.75" y1="885.3197" y2="885.3197"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="397.75" x2="397.75" y1="885.3197" y2="907.3197"/><polygon fill="#A80036" points="393.75,897.3197,397.75,907.3197,401.75,897.3197,397.75,901.3197" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.25" x2="159.25" y1="1079.3202" y2="1097.3202"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.25" x2="266.5" y1="1097.3202" y2="1097.3202"/><polygon fill="#A80036" points="256.5,1093.3202,266.5,1097.3202,256.5,1101.3202,260.5,1097.3202" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="397.75" x2="397.75" y1="1010.52" y2="1097.3202"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="397.75" x2="290.5" y1="1097.3202" y2="1097.3202"/><polygon fill="#A80036" points="300.5,1093.3202,290.5,1097.3202,300.5,1101.3202,296.5,1097.3202" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="826.5198" y2="873.3197"/><polygon fill="#A80036" points="274.5,863.3197,278.5,873.3197,282.5,863.3197,278.5,867.3197" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="733.3198" y2="792.1197"/><polygon fill="#A80036" points="274.5,782.1197,278.5,792.1197,282.5,782.1197,278.5,786.1197" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="88" x2="88" y1="1177.3202" y2="1210.5201"/><polygon fill="#A80036" points="84,1200.5201,88,1210.5201,92,1200.5201,88,1204.5201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="88" x2="88" y1="1244.9202" y2="1264.9202"/><polygon fill="#A80036" points="84,1254.9202,88,1264.9202,92,1254.9202,88,1258.9202" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="1177.3202" y2="1210.5201"/><polygon fill="#A80036" points="254,1200.5201,258,1210.5201,262,1200.5201,258,1204.5201" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="258" x2="258" y1="1244.9202" y2="1264.9202"/><polygon fill="#A80036" points="254,1254.9202,258,1264.9202,262,1254.9202,258,1258.9202" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="155" x2="175" y1="1165.3202" y2="1165.3202"/><polygon fill="#A80036" points="165,1161.3202,175,1165.3202,165,1169.3202,169,1165.3202" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="1109.3202" y2="1138.3202"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="88" y1="1138.3202" y2="1138.3202"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="88" x2="88" y1="1138.3202" y2="1153.3202"/><polygon fill="#A80036" points="84,1143.3202,88,1153.3202,92,1143.3202,88,1147.3202" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="341" x2="448.5" y1="1165.3202" y2="1165.3202"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="448.5" x2="448.5" y1="1165.3202" y2="1206.9202"/><polygon fill="#A80036" points="444.5,1196.9202,448.5,1206.9202,452.5,1196.9202,448.5,1200.9202" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="448.5" x2="448.5" y1="1241.3203" y2="1264.9202"/><polygon fill="#A80036" points="444.5,1254.9202,448.5,1264.9202,452.5,1254.9202,448.5,1258.9202" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="88" x2="448.5" y1="1264.9202" y2="1264.9202"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="278.5" x2="278.5" y1="1264.9202" y2="1284.9202"/><polygon fill="#A80036" points="274.5,1274.9202,278.5,1284.9202,282.5,1274.9202,278.5,1278.9202" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[50ffde6e5a6db044f69fe781b5c30b19]
@startuml vkservice_release_all_keys_and_modifiers

partition "VKService::release_all_keys_and_modifiers()"{
  start
    partition "release_all_keys()"{
      :Initialize return value;
      :result = Ok(())]
      :Get all pressed keys (keycodes);
      while (pressed keycode available?) is (yes)
        :VKService::send_keycode() to release the keycode;
        :release_result]
        if (release_result) then (success)
          :Remove key from list
          of pressed keys;
        else (failure)
          :release_all_keys_result = Err;
          :Emit error;
        endif
        :Next keycode;
      endwhile (no)
      :release_all_keys_result]
    }
    partition "release_all_modifiers()"{
      :Get bitflag of all modifiers released;
      partition "send_modifiers_bitflag()"{
        if (virtual_keyboard proxy) then (alive)
          :Use virtual_keyboard protocol to
          submit the new modifier bitflag;
          :Remember the submitted bitflag;
          :release_modifiers_result = Ok(())]
        else (not alive)
          :Emit error;
          :release_modifiers_result = Err(NotAlive)]
        endif
      }
    }
    if (both results are Ok(())) then (yes)
      :result = Ok(())]
    elseif (one of the results is 'NotAlive') then (yes)
      :result = Err(NotAlive))]
    else (no)
      :result = Err(InvalidKeycode))]
    endif
    
  stop
@enduml

PlantUML version 1.2020.15(Sun Jun 28 13:39:45 CEST 2020)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>