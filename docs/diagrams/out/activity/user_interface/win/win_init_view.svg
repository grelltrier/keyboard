<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="555px" preserveAspectRatio="none" style="width:515px;height:555px;" version="1.1" viewBox="0 0 515 555" width="515px" zoomAndPan="magnify"><defs><filter height="300%" id="f10enahch1v3a1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f10enahch1v3a1)" height="527.2003" style="stroke: #000000; stroke-width: 2.0;" width="487" x="11" y="11"/><path d="M117,12 L117,20.7999 L107,30.7999 L11,30.7999 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="14" y="25.0059">Win::init_view()</text><ellipse cx="130" cy="50.7999" fill="#000000" filter="url(#f10enahch1v3a1)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f10enahch1v3a1)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="27.5" y="129.3999"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="185" x="37.5" y="150.548">layer_shell::make_overlay_layer()</text><polygon fill="#FEFECE" filter="url(#f10enahch1v3a1)" points="50,80.7999,210,80.7999,222,92.7999,210,104.7999,50,104.7999,38,92.7999,50,80.7999" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="134" y="115.0189">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="50" y="96.4189">Compositor supports layer shell?</text><polygon fill="#FEFECE" filter="url(#f10enahch1v3a1)" points="130,183.8,142,195.8,130,207.8,118,195.8,130,183.8" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M257,217.8 L257,250 L237,254 L257,258 L257,290.2 A0,0 0 0 0 257,290.2 L488,290.2 A0,0 0 0 0 488,290.2 L488,227.8 L478,217.8 L257,217.8 A0,0 0 0 0 257,217.8 " fill="#FBFB77" filter="url(#f10enahch1v3a1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M478,217.8 L478,227.8 L488,227.8 L478,217.8 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="263" y="234.877">The callbacks will cause a message</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="178" x="263" y="250.477">to be sent over Relm's stream.</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="207" x="263" y="266.077">The message is then handled in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="194" x="263" y="281.677">update() method of the Win struct</text><rect fill="#FEFECE" filter="url(#f10enahch1v3a1)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="214" x="23" y="236.8"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="194" x="33" y="257.948">Set up callbacks for possible events</text><rect fill="#FEFECE" filter="url(#f10enahch1v3a1)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="149" x="55.5" y="310.2"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="129" x="65.5" y="331.3481">Make all widgets visible</text><path d="M205.5,354.6001 L205.5,379.0002 L185.5,383.0002 L205.5,387.0002 L205.5,411.4002 A0,0 0 0 0 205.5,411.4002 L442.5,411.4002 A0,0 0 0 0 442.5,411.4002 L442.5,364.6001 L432.5,354.6001 L205.5,354.6001 A0,0 0 0 0 205.5,354.6001 " fill="#FBFB77" filter="url(#f10enahch1v3a1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M432.5,354.6001 L432.5,364.6001 L442.5,364.6001 L432.5,354.6001 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="211.5" y="371.6771">The window starts out hidden</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="211.5" y="387.2772">and is only displayed when</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="211.5" y="402.8772">requested (by DBus or input_method)</text><rect fill="#FEFECE" filter="url(#f10enahch1v3a1)" height="34.4001" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="111" x="74.5" y="365.8001"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="84.5" y="386.9482">Hide the window</text><path d="M252.5,427.4003 L252.5,451.8003 L232.5,455.8003 L252.5,459.8003 L252.5,484.2003 A0,0 0 0 0 252.5,484.2003 L469.5,484.2003 A0,0 0 0 0 469.5,484.2003 L469.5,437.4003 L459.5,427.4003 L252.5,427.4003 A0,0 0 0 0 252.5,427.4003 " fill="#FBFB77" filter="url(#f10enahch1v3a1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M459.5,427.4003 L459.5,437.4003 L469.5,437.4003 L459.5,427.4003 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="258.5" y="444.4773">The window remains hidden</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="258.5" y="460.0773">This sets up the stack for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="196" x="258.5" y="475.6773">when the window becomes visible</text><rect fill="#FEFECE" filter="url(#f10enahch1v3a1)" height="48.8002" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="27.5" y="431.4002"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="37.5" y="452.5483">Make the grid from the</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="185" x="37.5" y="466.9484">active view of the keyboard visible</text><ellipse cx="130" cy="515.2003" fill="#FFFFFF" filter="url(#f10enahch1v3a1)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="130" cy="515.2003" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130" x2="130" y1="104.7999" y2="129.3999"/><polygon fill="#A80036" points="126,119.3999,130,129.3999,134,119.3999,130,123.3999" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="222" x2="242.5" y1="92.7999" y2="92.7999"/><polygon fill="#A80036" points="238.5,136.5999,242.5,146.5999,246.5,136.5999,242.5,140.5999" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="242.5" x2="242.5" y1="92.7999" y2="195.8"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="242.5" x2="142" y1="195.8" y2="195.8"/><polygon fill="#A80036" points="152,191.8,142,195.8,152,199.8,148,195.8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130" x2="130" y1="163.8" y2="183.8"/><polygon fill="#A80036" points="126,173.8,130,183.8,134,173.8,130,177.8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130" x2="130" y1="60.7999" y2="80.7999"/><polygon fill="#A80036" points="126,70.7999,130,80.7999,134,70.7999,130,74.7999" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130" x2="130" y1="207.8" y2="236.8"/><polygon fill="#A80036" points="126,226.8,130,236.8,134,226.8,130,230.8" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130" x2="130" y1="271.2001" y2="310.2"/><polygon fill="#A80036" points="126,300.2,130,310.2,134,300.2,130,304.2" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130" x2="130" y1="344.6001" y2="365.8001"/><polygon fill="#A80036" points="126,355.8001,130,365.8001,134,355.8001,130,359.8001" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130" x2="130" y1="400.2002" y2="431.4002"/><polygon fill="#A80036" points="126,421.4002,130,431.4002,134,421.4002,130,425.4002" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130" x2="130" y1="480.2004" y2="504.2003"/><polygon fill="#A80036" points="126,494.2003,130,504.2003,134,494.2003,130,498.2003" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[201e3ff0610cc3b603d208201982c973]
@startuml win_init_view

partition "Win::init_view()"{  
  start
  if (Compositor supports layer shell?) then (yes)
    :layer_shell::make_overlay_layer();
  endif
  :Set up callbacks for possible events;
  note right
    The callbacks will cause a message
    to be sent over Relm's stream.
    The message is then handled in the
    update() method of the Win struct
  end note
  :Make all widgets visible;
  :Hide the window;
  note right
    The window starts out hidden 
    and is only displayed when
    requested (by DBus or input_method)
  end note
  :Make the grid from the 
  active view of the keyboard visible;
  note right
    The window remains hidden
    This sets up the stack for 
    when the window becomes visible
  end note
  stop
}
@enduml

PlantUML version 1.2020.15(Sun Jun 28 13:39:45 CEST 2020)
(MIT source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>